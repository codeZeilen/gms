<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Model lock/unlock — model_lock • gms</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Model lock/unlock — model_lock"><meta property="og:description" content="Lock the model to coordinate multiple processes accessing the model.
This is necessary if you change files within the model and have to
avoid that another process reads from your half-written changes in
the mean time.
model_lock creates an exclusive lock on the given file and returns
a lock id. When the lock id is handed to model_unlock the lock is
dropped again, and another process can take the lock. The lock
is also dropped when the lock id goes out of scope and is garbage
collected in R or when the R process terminates or crashes. However,
it is good practice to explicitly call model_unlock when you don't
need the lock anymore.
If you want to check for informational purposes if the model is
currently locked by another process, you can use the is_model_locked()
function.
Note however that you should never use is_model_locked() to coordinate
access to the model folder. The return value of is_model_locked() is
only a snapshot at the time when the function is run.
Note additionally that is_model_locked() checks if the model is
locked by another process. If you currently hold the lock of the model
yourself, it will return FALSE."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.33.6</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/pik-piam/gms/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Model lock/unlock</h1>
    <small class="dont-index">Source: <a href="https://github.com/pik-piam/gms/blob/master/R/model_lock.R" class="external-link"><code>R/model_lock.R</code></a></small>
    <div class="hidden name"><code>model_lock.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Lock the model to coordinate multiple processes accessing the model.
This is necessary if you change files within the model and have to
avoid that another process reads from your half-written changes in
the mean time.
model_lock creates an exclusive lock on the given file and returns
a lock id. When the lock id is handed to model_unlock the lock is
dropped again, and another process can take the lock. The lock
is also dropped when the lock id goes out of scope and is garbage
collected in R or when the R process terminates or crashes. However,
it is good practice to explicitly call model_unlock when you don't
need the lock anymore.
If you want to check for informational purposes if the model is
currently locked by another process, you can use the is_model_locked()
function.
Note however that you should never use is_model_locked() to coordinate
access to the model folder. The return value of is_model_locked() is
only a snapshot at the time when the function is run.
Note additionally that is_model_locked() checks if the model is
locked by another process. If you currently hold the lock of the model
yourself, it will return FALSE.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">model_lock</span><span class="op">(</span>folder <span class="op">=</span> <span class="st">"."</span>, file <span class="op">=</span> <span class="st">".lock"</span>, timeout1 <span class="op">=</span> <span class="fl">12</span>, timeout2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>check_interval <span class="op">=</span> <span class="cn">NULL</span>, oncluster <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu">model_unlock</span><span class="op">(</span><span class="va">id</span>, folder <span class="op">=</span> <span class="cn">NULL</span>, file <span class="op">=</span> <span class="cn">NULL</span>, oncluster <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu">is_model_locked</span><span class="op">(</span>folder <span class="op">=</span> <span class="st">"."</span>, file <span class="op">=</span> <span class="st">".lock"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-folder">folder<a class="anchor" aria-label="anchor" href="#arg-folder"></a></dt>
<dd><p>path to the model folder</p></dd>


<dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>file name of the lock file. Don't use the lock file for anything
else (i.e. don't read or write or open the lock file).</p></dd>


<dt id="arg-timeout-">timeout1<a class="anchor" aria-label="anchor" href="#arg-timeout-"></a></dt>
<dd><p>Time in hours to wait for other processes to free the lock
before giving up and exiting with an error.</p></dd>


<dt id="arg-timeout-">timeout2<a class="anchor" aria-label="anchor" href="#arg-timeout-"></a></dt>
<dd><p>deprecated setting which will be ignored.</p></dd>


<dt id="arg-check-interval">check_interval<a class="anchor" aria-label="anchor" href="#arg-check-interval"></a></dt>
<dd><p>deprecated setting which will be ignored.</p></dd>


<dt id="arg-oncluster">oncluster<a class="anchor" aria-label="anchor" href="#arg-oncluster"></a></dt>
<dd><p>deprecated setting which will be ignored.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>lock id as returned by model_lock.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>model_lock returns the lock id which is needed
to identify the lock in model_unlock.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="check_config.html">check_config</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Jan Philipp Dietrich, David Klein, Mika Pflüger</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#lock folder</span></span></span>
<span class="r-in"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu">model_lock</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2026-01-12 16:32:13: try to acquire model lock...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2026-01-12 16:32:13: acquired model lock in 0 secs.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#unlock folder</span></span></span>
<span class="r-in"><span><span class="fu">model_unlock</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2026-01-12 16:32:13: unlocked model.</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Jan Philipp Dietrich, David Klein, Anastasis Giannousakis, Felicitas Beier, Johannes Koch, Lavinia Baumstark, Mika Pflüger, Oliver Richters.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

      </footer></div>






  </body></html>

