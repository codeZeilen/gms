<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Model lock/unlock — model_lock • gms</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Model lock/unlock — model_lock"><meta name="description" content="Lock the model to coordinate multiple processes accessing the model.
This is necessary if you change files within the model and have to
avoid that another process reads from your half-written changes in
the mean time.
model_lock creates an exclusive lock on the given file and returns
a lock id. When the lock id is handed to model_unlock the lock is
dropped again, and another process can take the lock. The lock
is also dropped when the lock id goes out of scope and is garbage
collected in R or when the R process terminates or crashes. However,
it is good practice to explicitly call model_unlock when you don't
need the lock anymore.
If you want to check for informational purposes if the model is
currently locked by another process, you can use the is_model_locked()
function.
Note however that you should never use is_model_locked() to coordinate
access to the model folder. The return value of is_model_locked() is
only a snapshot at the time when the function is run.
Note additionally that is_model_locked() checks if the model is
locked by another process. If you currently hold the lock of the model
yourself, it will return FALSE."><meta property="og:description" content="Lock the model to coordinate multiple processes accessing the model.
This is necessary if you change files within the model and have to
avoid that another process reads from your half-written changes in
the mean time.
model_lock creates an exclusive lock on the given file and returns
a lock id. When the lock id is handed to model_unlock the lock is
dropped again, and another process can take the lock. The lock
is also dropped when the lock id goes out of scope and is garbage
collected in R or when the R process terminates or crashes. However,
it is good practice to explicitly call model_unlock when you don't
need the lock anymore.
If you want to check for informational purposes if the model is
currently locked by another process, you can use the is_model_locked()
function.
Note however that you should never use is_model_locked() to coordinate
access to the model folder. The return value of is_model_locked() is
only a snapshot at the time when the function is run.
Note additionally that is_model_locked() checks if the model is
locked by another process. If you currently hold the lock of the model
yourself, it will return FALSE."></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">gms</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.33.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/pik-piam/gms/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Model lock/unlock</h1>
      <small class="dont-index">Source: <a href="https://github.com/pik-piam/gms/blob/master/R/model_lock.R" class="external-link"><code>R/model_lock.R</code></a></small>
      <div class="d-none name"><code>model_lock.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Lock the model to coordinate multiple processes accessing the model.
This is necessary if you change files within the model and have to
avoid that another process reads from your half-written changes in
the mean time.
model_lock creates an exclusive lock on the given file and returns
a lock id. When the lock id is handed to model_unlock the lock is
dropped again, and another process can take the lock. The lock
is also dropped when the lock id goes out of scope and is garbage
collected in R or when the R process terminates or crashes. However,
it is good practice to explicitly call model_unlock when you don't
need the lock anymore.
If you want to check for informational purposes if the model is
currently locked by another process, you can use the is_model_locked()
function.
Note however that you should never use is_model_locked() to coordinate
access to the model folder. The return value of is_model_locked() is
only a snapshot at the time when the function is run.
Note additionally that is_model_locked() checks if the model is
locked by another process. If you currently hold the lock of the model
yourself, it will return FALSE.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">model_lock</span><span class="op">(</span>folder <span class="op">=</span> <span class="st">"."</span>, file <span class="op">=</span> <span class="st">".lock"</span>, timeout1 <span class="op">=</span> <span class="fl">12</span>, timeout2 <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>check_interval <span class="op">=</span> <span class="cn">NULL</span>, oncluster <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu">model_unlock</span><span class="op">(</span><span class="va">id</span>, folder <span class="op">=</span> <span class="cn">NULL</span>, file <span class="op">=</span> <span class="cn">NULL</span>, oncluster <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span><span class="fu">is_model_locked</span><span class="op">(</span>folder <span class="op">=</span> <span class="st">"."</span>, file <span class="op">=</span> <span class="st">".lock"</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-folder">folder<a class="anchor" aria-label="anchor" href="#arg-folder"></a></dt>
<dd><p>path to the model folder</p></dd>


<dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>file name of the lock file. Don't use the lock file for anything
else (i.e. don't read or write or open the lock file).</p></dd>


<dt id="arg-timeout-">timeout1<a class="anchor" aria-label="anchor" href="#arg-timeout-"></a></dt>
<dd><p>Time in hours to wait for other processes to free the lock
before giving up and exiting with an error.</p></dd>


<dt id="arg-timeout-">timeout2<a class="anchor" aria-label="anchor" href="#arg-timeout-"></a></dt>
<dd><p>deprecated setting which will be ignored.</p></dd>


<dt id="arg-check-interval">check_interval<a class="anchor" aria-label="anchor" href="#arg-check-interval"></a></dt>
<dd><p>deprecated setting which will be ignored.</p></dd>


<dt id="arg-oncluster">oncluster<a class="anchor" aria-label="anchor" href="#arg-oncluster"></a></dt>
<dd><p>deprecated setting which will be ignored.</p></dd>


<dt id="arg-id">id<a class="anchor" aria-label="anchor" href="#arg-id"></a></dt>
<dd><p>lock id as returned by model_lock.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>model_lock returns the lock id which is needed
to identify the lock in model_unlock.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="check_config.html">check_config</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Jan Philipp Dietrich, David Klein, Mika Pflüger</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#lock folder</span></span></span>
<span class="r-in"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu">model_lock</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2026-01-13 09:14:42: try to acquire model lock...</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2026-01-13 09:14:42: acquired model lock in 0 secs.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#unlock folder</span></span></span>
<span class="r-in"><span><span class="fu">model_unlock</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 2026-01-13 09:14:42: unlocked model.</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by Jan Philipp Dietrich, David Klein, Anastasis Giannousakis, Felicitas Beier, Johannes Koch, Lavinia Baumstark, Mika Pflüger, Oliver Richters.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

